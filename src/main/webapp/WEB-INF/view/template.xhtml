<html lang="en"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:p="http://primefaces.org/ui">
<f:view>
<h:head>
    <!-- Required meta tags -->
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css"/>

    <title>Taskmanager SPRING</title>

    <style type="text/css">
        .ui-growl {
            right: 20px;
            top: 80px;
        }
    </style>
</h:head>

<h:body>
    <nav class="navbar navbar-dark navbar-expand-lg bg-dark sticky-top">
        <a href="${pageContext.request.contextPath}/" class="navbar-brand"><img src="https://i.imgur.com/cVPgHhm.png" alt="logo" width="30"/></a>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <h:form>
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <p:link value="Users" outcome="user-list" class="nav-link" ajax="false"/>
                </li>
                <li class="nav-item">
                    <h:link value="Projects" outcome="project-list" class="nav-link"/>
                </li>
                <li class="nav-item">
                    <h:link value="Tasks" outcome="task-list" class="nav-link"/>
                </li>
            </ul>
            </h:form>
        </div>
        <div class="btn-group #{authorizationController.userName == null ? '' : 'd-none'}" role="group">
            <button class="btn btn-outline-light mx-1" data-toggle="modal" data-target="#loginModal">Login</button>
            <button class="btn btn-outline-light" data-toggle="modal" data-target="#registerModal">Register</button>
        </div>
        <h:form class="m-0 p-0 #{authorizationController.userName != null ? '' : 'd-none'}" action="${pageContext.request.contextPath}/authorization/logout" method="post">
            <h:commandButton
                    value="Logout"
                    styleClass="btn btn-outline-light"
                    action="#{authorizationController.logout}">
            </h:commandButton>
        </h:form>
    </nav>
    <nav class="navbar navbar-dark navbar-expand-lg bg-dark fixed-bottom">
        <a href="#" class="navbar-brand"><img src="https://i.imgur.com/cVPgHhm.png" alt="logo" width="30"/></a>
    </nav>

    <div id="content">
        <ui:insert name="content"/>
    </div>

<div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="loginModal" aria-hidden="true">
<div class="modal-dialog" role="document">
    <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title" id="loginModalTitle">Authorization</h5>
            <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">X</span>
            </button>
        </div>
        <div class="modal-body">
            <h:form id="frm">
                <div class="form-group">
                    <label for="loginInput">Login</label>
                    <h:inputText name="login" required="true" class="form-control" type="text" id="loginInput" aria-describedby="loginHelp" placeholder="login" value="#{authorizationController.loginInput}"/>
                    <small id="loginHelp" class="form-text text-muted">Enter your login</small>
                </div>
                <div class="form-group">
                    <label for="passwordInput">Password</label>
                    <h:inputSecret name="password" required="true" class="form-control" type="password" id="passwordInput" placeholder="password" value="#{authorizationController.passwordInput}"/>
                    <small id="passwordHelp" class="form-text text-muted">Enter your password</small>
                </div>
                <hr class="separator"/>
                <div class="container-fluid">
                    <div class="row justify-content-end">
                        <h:commandButton
                                value="Login"
                                styleClass="btn btn-success mr-1"
                                action="#{authorizationController.login}">
                        </h:commandButton>
                        <button class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </h:form>
        </div>
    </div>
</div>
</div>

<div class="modal fade" id="registerModal" tabindex="-1" role="dialog" aria-labelledby="loginModal" aria-hidden="true">
<div class="modal-dialog" role="document">
    <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title" id="registerModalTitle">Registration</h5>
            <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">X</span>
            </button>
        </div>
        <div class="modal-body">
            <h:form>
                <div class="form-group">
                    <label for="loginInputRegisterModal">Login</label>
                    <h:inputText class="form-control" type="text" required="true" id="loginInputRegisterModal" aria-describedby="loginHelp" placeholder="login" value="#{authorizationController.loginInput}"/>
                    <small id="loginHelpRegisterModal" class="form-text text-muted">Enter your login</small>
                </div>
                <div class="form-group">
                    <label for="passwordInputRegisterModal">Password</label>
                    <h:inputSecret class="form-control form-control-sm" type="password" required="true" id="passwordInputRegisterModal" placeholder="password" value="#{authorizationController.passwordInput}"/>
                    <small id="passwordHelpRegisterModal" class="form-text text-muted">Enter your password</small>
                </div>
                <div class="form-group">
                    <h:inputSecret class="form-control form-control-sm" type="password" required="true" id="passwordConfirmRegisterModal" placeholder="password" value="#{authorizationController.passwordConfirmation}"/>
                    <small id="passwordConfirmHelpRegisterModal" class="form-text text-muted">Confirm password</small>
                </div>
                <hr class="separator"/>
                <div class="container-fluid">
                    <div class="row justify-content-end">
                        <h:commandButton
                                value="Register"
                                styleClass="btn btn-success mr-1"
                                action="#{authorizationController.register}">
                        </h:commandButton>
                        <button class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </h:form>
        </div>
    </div>
</div>
</div>

<!--<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
</h:body>
</f:view>
</html>
